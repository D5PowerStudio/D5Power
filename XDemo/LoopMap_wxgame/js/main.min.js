var egret=window.egret,__reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{c(r.next(t))}catch(e){o(e)}}function s(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(r){n=[6,r],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Main=function(t){function e(){var n=t.call(this)||this;return e.me=n,n._objList=[],n.addEventListener(egret.Event.ADDED_TO_STAGE,n.init,n),n}return __extends(e,t),e.prototype.init=function(t){this.stage.scaleMode=egret.StageScaleMode.NO_SCALE,d5power.D5Game.screenWidth=this.stage.stageWidth,d5power.D5Game.screenHeight=this.stage.stageHeight,this.gameStart(),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.init,this)},e.prototype.uiReady=function(){this.gameStart()},e.prototype.gameStart=function(){this._layer_ui=new egret.DisplayObjectContainer,this._layer_map=new egret.DisplayObjectContainer,this._layer_objects=new egret.DisplayObjectContainer,this.addChild(this._layer_map),this.addChild(this._layer_objects),this.addChild(this._layer_ui),this._map=new d5power.BaseMap,this._map.setContainer(this._layer_map),this._map.createLoop(561,"resource/bg.png",this.onReady,this,3,3),this._camera=new d5power.Camera(this._map),this.stage.addEventListener(egret.Event.RESIZE,this.onResize,this)},e.prototype.addObject=function(t){-1==this._objList.indexOf(t)&&this._objList.push(t),t.monitor.parent!=this._layer_objects&&this._layer_objects.addChild(t.monitor)},e.prototype.onResize=function(t){this._map&&this._map.resize()},e.prototype.onBonesReady=function(t){if(null!=t){t.monitor;t.setPos(10,10),this.addObject(t)}},e.prototype.onReady=function(){var t=this;this.addEventListener(egret.Event.ENTER_FRAME,function(e){egret.getTimer();t._camera.update(),t._map.render()},this)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform),window.Main=Main;