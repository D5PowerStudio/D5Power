function trace(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",o=0,r=t.length;r>o;o++)i+=t[o]+" ";console.log(i)}var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},d5power;!function(t){var e=function(){function t(){this._link=0,this._waiterList=new Array}return t.setupUnknow=function(e,i,o){void 0===i&&(i=null),void 0===o&&(o=null);var r=function(e){null!=e&&(t._unknow=e,null!=i&&i.apply(o))};RES.getResByUrl(e,r,null,RES.ResourceItem.TYPE_IMAGE)},t.setupShadow=function(e,i,o){void 0===i&&(i=null),void 0===o&&(o=null);var r=function(e){null!=e&&(t._shadow=e,null!=i&&i.apply(o))};RES.getResByUrl(e,r,null,RES.ResourceItem.TYPE_IMAGE)},Object.defineProperty(t,"shadow",{get:function(){return t._shadow},enumerable:!0,configurable:!0}),t.getInstance=function(e,i){var o;return null!=t._pool_inuse[e]?(o=t._pool_inuse[e],o._link++,1==o._link&&o.setup(e)):(o=t._pool_jale.length>0?t._pool_jale.pop():new t,o._link++,o.setup(e)),null==o._sheet?o.addWaiter(i):i.onSpriteSheepReady(o),o.loadID=i.loadID,o},t.back2pool=function(e){t._pool_inuse[e._name]=null,t._pool_jale.length<t.MAX_IN_JALE&&-1==t._pool_jale.indexOf(e)&&t._pool_jale.push(e)},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderTime",{get:function(){return this._renderTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalFrame",{get:function(){return this._totalFrame},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalDirection",{get:function(){return this._totalDirection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowX",{get:function(){return this._shadowX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowY",{get:function(){return this._shadowY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gX",{get:function(){return this._gX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gY",{get:function(){return this._gY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uvList",{get:function(){return this._uvList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameWidth",{get:function(){return this._frameW},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameHeight",{get:function(){return this._frameH},enumerable:!0,configurable:!0}),t.prototype.addWaiter=function(t){-1==this._waiterList.indexOf(t)&&this._waiterList.push(t)},t.prototype.setup=function(e){".png"==e.substr(-4,4)?this._name=e.substr(0,e.length-4):(this._name=e,e+=".png"),t._pool_inuse[this._name]=this,RES.getResByUrl(e,this.onTextureComplete,this,RES.ResourceItem.TYPE_IMAGE)},t.prototype.unlink=function(){this._link--,this._link<0&&(this._link=0),0==this._link&&(this._sheet=null,this._waiterList=[],t._pool_inuse[this._name]=null,t.back2pool(this))},t.prototype.onTextureComplete=function(t){0!=this._link&&(this._sheet=new egret.SpriteSheet(t),RES.getResByUrl(this._name+".json",this.onDataComplate,this,RES.ResourceItem.TYPE_JSON))},t.prototype.getTexture=function(e,i){return null==this._sheet?t._unknow:this._sheet.getTexture("frame"+e+"_"+i)},t.prototype.onDataComplate=function(t){if(0==this._link)return void(this._sheet=null);switch(this._totalFrame=parseInt(t.Frame),this._renderTime=parseInt(t.Time),this._shadowX=parseInt(t.shadowX),this._shadowY=parseInt(t.shadowY),this._shadowY>=this._shadowX&&(this._shadowY=.5*t.shadowX),this._totalDirection=parseInt(t.Direction),parseInt(t.Direction)){case 1:this._totalDirection=1;break;case 5:this._totalDirection=8;break;case 3:this._totalDirection=4}this._gX=parseInt(t.X),this._gY=parseInt(t.Y),this._frameW=parseInt(t.FrameWidth),this._frameH=parseInt(t.FrameHeight),this._uvList=t.uv?t.uv:null;var e,i;if(t.uv)for(i=0;i<this._totalDirection;i++)for(e=0;e<this._totalFrame;e++){var o=5>i?i:8==this._totalDirection?i:8-i,r=t.uv[o*this._totalFrame+e];null==r?console.log("[D5SpriteSheepINIT] can not find uv config line:",i,",frame:",e,"==========================="):(r.offY==-r.height&&(r.offY+=.01),this._sheet.createTexture("frame"+i+"_"+e,e*t.FrameWidth+r.x,i*t.FrameHeight+r.y,r.width,r.height,0,0))}else for(i=0;i<this._totalDirection;i++)for(e=0;e<this._totalFrame;e++)this._sheet.createTexture("frame"+i+"_"+e,e*t.FrameWidth,i*t.FrameHeight,t.FrameWidth,t.FrameHeight,0,0);for(;this._waiterList.length>0;){var n=this._waiterList.pop();n.loadID==this.loadID&&n.onSpriteSheepReady(this)}},t.MAX_IN_JALE=200,t._pool_inuse={},t._pool_jale=new Array,t}();t.D5SpriteSheet=e,__reflect(e.prototype,"d5power.D5SpriteSheet",["d5power.IDisplayer"])}(d5power||(d5power={}));var d5power;!function(t){var e=function(){function t(){this._link=0,this._link=0,this._waiterList=new Array}return t.getInstance=function(e,i){var o;return null!=t._pool_inuse[e]?(o=t._pool_inuse[e],o._link++,1==o._link&&o.setup(e)):(o=t._pool_jale.length>0?t._pool_jale.pop():new t,o._link++,o.setup(e)),null==o._sheet?o.addWaiter(i):i.onSpriteSheepReady(o),o.loadID=i.loadID,o},t.back2pool=function(e){t._pool_inuse[e._name]=null,t._pool_jale.length<t.MAX_IN_JALE&&-1==t._pool_jale.indexOf(e)&&t._pool_jale.push(e)},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderTime",{get:function(){return this._renderTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalFrame",{get:function(){return this._totalFrame},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalDirection",{get:function(){return this._totalDirection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowX",{get:function(){return this._shadowX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowY",{get:function(){return this._shadowY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gX",{get:function(){return this._gX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gY",{get:function(){return this._gY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uvList",{get:function(){return this._uvList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameWidth",{get:function(){return this._frameW},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameHeight",{get:function(){return this._frameH},enumerable:!0,configurable:!0}),t.prototype.addWaiter=function(t){-1==this._waiterList.indexOf(t)&&this._waiterList.push(t)},t.prototype.unlink=function(){this._link--,this._link<0&&(this._link=0),0==this._link&&(this._sheet=null,this._waiterList=[],t._pool_inuse[this._name]=null,t.back2pool(this))},t.prototype.setup=function(e){if(this._name=e,t._pool_inuse[this._name]=this,".png"==e.substr(-4,4))RES.getResByUrl(e,this.onTextureComplete,this,RES.ResourceItem.TYPE_IMAGE);else{if("json"!=e.substr(-4,4))return void trace("[D5EffectSpriteSheet] can not support this format.");RES.getResByUrl(e,this.onDataComplate,this,RES.ResourceItem.TYPE_JSON)}},t.prototype.getTexture=function(t,e){return null==this._sheet?this._texture:this._sheet.getTexture("frame"+t+"_"+e)},t.prototype.onTextureComplete=function(t){0!=this._link&&(this._sheet=new egret.SpriteSheet(t),RES.getResByUrl(this._name+".json",this.onDataComplate,this,RES.ResourceItem.TYPE_JSON))},t.prototype.onConfigComplate=function(t){0!=this._link&&(this._conf=t,RES.getResByUrl(this._name.substr(0,-5)+".png",this.onDataComplate,this,RES.ResourceItem.TYPE_IMAGE))},t.prototype.onDataComplate=function(t){if(0==this._link||null==this._conf)return void(this._sheet=null);this._sheet=new egret.SpriteSheet(t);var e=this._conf;switch(this._totalFrame=parseInt(e.Frame),this._renderTime=parseInt(e.Time),this._shadowX=parseInt(e.shadowX),this._shadowY=parseInt(e.shadowY),this._shadowY>=this._shadowX&&(this._shadowY=.5*e.shadowX),this._totalDirection=parseInt(e.Direction),parseInt(e.Direction)){case 1:this._totalDirection=1;break;case 5:this._totalDirection=8;break;case 3:this._totalDirection=4}this._gX=parseInt(e.X),this._gY=parseInt(e.Y),this._frameW=parseInt(e.FrameWidth),this._frameH=parseInt(e.FrameHeight),this._uvList=e.uv?e.uv:null;var i,o;if(e.uv)for(o=0;o<this._totalDirection;o++)for(i=0;i<this._totalFrame;i++){var r=5>o?o:8-o,n=e.uv[r*this._totalFrame+i];null==n?console.log("[D5SpriteSheepINIT] can not find uv config line:",o,",frame:",i,"==========================="):(n.offY==-n.height&&(n.offY+=.01),this._sheet.createTexture("frame"+o+"_"+i,i*e.FrameWidth+n.x,o*e.FrameHeight+n.y,n.width,n.height,0,0))}else for(o=0;o<this._totalDirection;o++)for(i=0;i<this._totalFrame;i++)this._sheet.createTexture("frame"+o+"_"+i,i*e.FrameWidth,o*e.FrameHeight,e.FrameWidth,e.FrameHeight,0,0);for(var i=this._waiterList.length-1;i>=0;){var a=this._waiterList[i];a.loadID==this.loadID&&(a.onSpriteSheepReady(this),this._waiterList.splice(i,1))}},t.MAX_IN_JALE=200,t._pool_inuse={},t._pool_jale=new Array,t}();t.D5EffectSpriteSheet=e,__reflect(e.prototype,"d5power.D5EffectSpriteSheet",["d5power.IDisplayer"])}(d5power||(d5power={}));var d5power;!function(t){var e=function(){function t(){this.offX=0,this.offY=0,this.width=0,this.height=0}return t.prototype.format=function(t){this.offX=parseInt(t.offX),this.offY=parseInt(t.offY),this.width=parseInt(t.width),this.height=parseInt(t.height),this.u=t.u,this.v=t.v,this.w=t.w,this.h=t.h,this.x=t.x,this.y=t.y},t}();t.UVData=e,__reflect(e.prototype,"d5power.UVData")}(d5power||(d5power={}));var d5power;!function(t){var e=function(){function t(){}return t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();t.Endian=e,__reflect(e.prototype,"d5power.Endian");var i=function(){function t(t){this.BUFFER_EXT_SIZE=0,this.EOF_byte=-1,this.EOF_code_point=-1,this._setArrayBuffer(t||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=e.BIG_ENDIAN}return t.prototype._setArrayBuffer=function(t){this.write_position=t.byteLength,this.data=new DataView(t),this._position=0},t.prototype.setArrayBuffer=function(t){},Object.defineProperty(t.prototype,"buffer",{get:function(){return this.data.buffer},set:function(t){this.data=new DataView(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this.data},set:function(t){this.data=t,this.write_position=t.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.write_position=t>this.write_position?t:this.write_position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t;var e=new Uint8Array(new ArrayBuffer(t)),i=this.data.buffer.byteLength;i>t&&(this._position=t);var o=Math.min(i,t);e.set(new Uint8Array(this.data.buffer,0,o)),this.buffer=e.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},t.prototype.readBoolean=function(){return this.validate(t.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null},t.prototype.readByte=function(){return this.validate(t.SIZE_OF_INT8)?this.data.getInt8(this.position++):null},t.prototype.readBytes=function(e,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),0==o)o=this.bytesAvailable;else if(!this.validate(o))return null;e?e.validateBuffer(i+o):e=new t(new ArrayBuffer(i+o));for(var r=0;o>r;r++)e.data.setUint8(r+i,this.data.getUint8(this.position++))},t.prototype.readDouble=function(){if(!this.validate(t.SIZE_OF_FLOAT64))return null;var i=this.data.getFloat64(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_FLOAT64,i},t.prototype.readFloat=function(){if(!this.validate(t.SIZE_OF_FLOAT32))return null;var i=this.data.getFloat32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_FLOAT32,i},t.prototype.readInt=function(){if(!this.validate(t.SIZE_OF_INT32))return null;var i=this.data.getInt32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_INT32,i},t.prototype.readShort=function(){if(!this.validate(t.SIZE_OF_INT16))return null;var i=this.data.getInt16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_INT16,i},t.prototype.readUnsignedByte=function(){return this.validate(t.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null},t.prototype.readUnsignedInt=function(){if(!this.validate(t.SIZE_OF_UINT32))return null;var i=this.data.getUint32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_UINT32,i},t.prototype.readUnsignedShort=function(){if(!this.validate(t.SIZE_OF_UINT16))return null;var i=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_UINT16,i},t.prototype.readUTF=function(){if(!this.validate(t.SIZE_OF_UINT16))return null;var i=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=t.SIZE_OF_UINT16,i>0?this.readUTFBytes(i):""},t.prototype.readUTFBytes=function(t){if(!this.validate(t))return null;var e=new Uint8Array(this.buffer,this.bufferOffset+this.position,t);return this.position+=t,this.decodeUTF8(e)},t.prototype.writeBoolean=function(e){this.validateBuffer(t.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,e?1:0)},t.prototype.writeByte=function(e){this.validateBuffer(t.SIZE_OF_INT8),this.data.setInt8(this.position++,e)},t.prototype.writeBytes=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o;if(!(0>e)&&!(0>i)&&(o=0==i?t.length-e:Math.min(t.length-e,i),o>0)){this.validateBuffer(o);for(var r=new DataView(t.buffer),n=o,a=4;n>a;n-=a)this.data.setUint32(this._position,r.getUint32(e)),this.position+=a,e+=a;for(;n>0;n--)this.data.setUint8(this.position++,r.getUint8(e++))}},t.prototype.writeDouble=function(i){this.validateBuffer(t.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,i,this.endian==e.LITTLE_ENDIAN),this.position+=t.SIZE_OF_FLOAT64},t.prototype.writeFloat=function(i){this.validateBuffer(t.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,i,this.endian==e.LITTLE_ENDIAN),this.position+=t.SIZE_OF_FLOAT32},t.prototype.writeInt=function(i){this.validateBuffer(t.SIZE_OF_INT32),this.data.setInt32(this.position,i,this.endian==e.LITTLE_ENDIAN),this.position+=t.SIZE_OF_INT32},t.prototype.writeShort=function(i){this.validateBuffer(t.SIZE_OF_INT16),this.data.setInt16(this.position,i,this.endian==e.LITTLE_ENDIAN),this.position+=t.SIZE_OF_INT16},t.prototype.writeUnsignedInt=function(i){this.validateBuffer(t.SIZE_OF_UINT32),this.data.setUint32(this.position,i,this.endian==e.LITTLE_ENDIAN),this.position+=t.SIZE_OF_UINT32},t.prototype.writeUnsignedShort=function(i){this.validateBuffer(t.SIZE_OF_UINT16),this.data.setUint16(this.position,i,this.endian==e.LITTLE_ENDIAN),this.position+=t.SIZE_OF_UINT16},t.prototype.writeUTF=function(i){var o=this.encodeUTF8(i),r=o.length;this.validateBuffer(t.SIZE_OF_UINT16+r),this.data.setUint16(this.position,r,this.endian==e.LITTLE_ENDIAN),this.position+=t.SIZE_OF_UINT16,this._writeUint8Array(o,!1)},t.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},t.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},t.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0),e&&this.validateBuffer(this.position+t.length);for(var i=0;i<t.length;i++)this.data.setUint8(this.position++,t[i])},t.prototype.validate=function(t){return this.data.byteLength>0&&this._position+t<=this.data.byteLength?!0:void trace("[ByteArray] 1025")},t.prototype.validateBuffer=function(t,e){if(void 0===e&&(e=!1),this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this.data.byteLength<t||e){var i=new Uint8Array(new ArrayBuffer(t+this.BUFFER_EXT_SIZE)),o=Math.min(this.data.buffer.byteLength,t+this.BUFFER_EXT_SIZE);i.set(new Uint8Array(this.data.buffer,0,o)),this.buffer=i.buffer}},t.prototype.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),o=[];i.length>e;){var r=i[e++];if(this.inRange(r,55296,57343))this.encodertrace(r);else if(this.inRange(r,0,127))o.push(r);else{var n=void 0,a=void 0;for(this.inRange(r,128,2047)?(n=1,a=192):this.inRange(r,2048,65535)?(n=2,a=224):this.inRange(r,65536,1114111)&&(n=3,a=240),o.push(this.div(r,Math.pow(64,n))+a);n>0;){var s=this.div(r,Math.pow(64,n-1));o.push(128+s%64),n-=1}}}return new Uint8Array(o)},t.prototype.decodeUTF8=function(t){for(var e,i=!1,o=0,r="",n=0,a=0,s=0,h=0;t.length>o;){var f=t[o++];if(f==this.EOF_byte)e=0!=a?this.decodertrace(i):this.EOF_code_point;else if(0==a)this.inRange(f,0,127)?e=f:(this.inRange(f,194,223)?(a=1,h=128,n=f-192):this.inRange(f,224,239)?(a=2,h=2048,n=f-224):this.inRange(f,240,244)?(a=3,h=65536,n=f-240):this.decodertrace(i),n*=Math.pow(64,a),e=null);else if(this.inRange(f,128,191))if(s+=1,n+=(f-128)*Math.pow(64,a-s),s!==a)e=null;else{var u=n,p=h;n=0,a=0,s=0,h=0,e=this.inRange(u,p,1114111)&&!this.inRange(u,55296,57343)?u:this.decodertrace(i,f)}else n=0,a=0,s=0,h=0,o--,e=this.decodertrace(i,f);null!==e&&e!==this.EOF_code_point&&(65535>=e?e>0&&(r+=String.fromCharCode(e)):(e-=65536,r+=String.fromCharCode(55296+(e>>10&1023)),r+=String.fromCharCode(56320+(1023&e))))}return r},t.prototype.encodertrace=function(t){trace("[ByteArray]1026",t)},t.prototype.decodertrace=function(t,e){return t&&trace("[ByteArray]1027"),e||65533},t.prototype.inRange=function(t,e,i){return t>=e&&i>=t},t.prototype.div=function(t,e){return Math.floor(t/e)},t.prototype.stringToCodePoints=function(t){for(var e=[],i=0,o=t.length;i<t.length;){var r=t.charCodeAt(i);if(this.inRange(r,55296,57343))if(this.inRange(r,56320,57343))e.push(65533);else if(i==o-1)e.push(65533);else{var n=t.charCodeAt(i+1);if(this.inRange(n,56320,57343)){var a=1023&r,s=1023&n;i+=1,e.push(65536+(a<<10)+s)}else e.push(65533)}else e.push(r);i+=1}return e},t.SIZE_OF_BOOLEAN=1,t.SIZE_OF_INT8=1,t.SIZE_OF_INT16=2,t.SIZE_OF_INT32=4,t.SIZE_OF_UINT8=1,t.SIZE_OF_UINT16=2,t.SIZE_OF_UINT32=4,t.SIZE_OF_FLOAT32=4,t.SIZE_OF_FLOAT64=8,t}();t.ByteArray=i,__reflect(i.prototype,"d5power.ByteArray")}(d5power||(d5power={}));var d5power;!function(t){var e=function(){function e(){this._resList=[]}return e.setup=function(t,i,o){var r,n=function(e){null==e?i.apply(o,[-1]):(r=e,RES.getResByUrl(t+"uiresource.json",a,this,RES.ResourceItem.TYPE_JSON))},a=function(t){null==t?i.apply(o,[-2]):(e.setupResLib(r,t),i.apply(o,[1]))};RES.getResByUrl(t+"uiresource.png",n,this,RES.ResourceItem.TYPE_IMAGE)},e.setupResLib=function(i,o){var r,n,a,s,h,f=new egret.SpriteSheet(i);for(var u in o){trace(u,o[u]),r=o[u];var p=new e;switch(h=[],r.type){case"D5MirrorBox":a=r.cut[0],n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=a.x,n.height=a.y,h.push(n),n=new t.UVData,n.offX=r.x+a.x,n.offY=r.y,n.width=r.w-a.x-1,n.height=a.y,h.push(n),n=new t.UVData,n.offX=r.x,n.offY=r.y+a.y-1,n.width=a.x,n.height=r.h-a.y,h.push(n),n=new t.UVData,n.offX=r.x+a.x,n.offY=r.y+a.y,n.width=r.w-a.x-1,n.height=r.h-a.y-1,h.push(n),p.setupResource(f,u,h);break;case"D5Window":a=r.cut[0],s=r.cut[1],n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=a.x,n.height=a.y,h.push(n),n=new t.UVData,n.offX=r.x+a.x,n.offY=r.y,n.width=s.x-a.x,n.height=a.y,h.push(n),n=new t.UVData,n.offX=r.x+s.x,n.offY=r.y,n.width=r.w-s.x,n.height=a.y,h.push(n),n=new t.UVData,n.offX=r.x,n.offY=r.y+a.y,n.width=a.x,n.height=s.y-a.y,h.push(n),n=new t.UVData,n.offX=r.x+a.x,n.offY=r.y+a.y,n.width=s.x-a.x,n.height=s.y-a.y,h.push(n),n=new t.UVData,n.offX=r.x+s.x,n.offY=r.y+a.y,n.width=r.w-s.x,n.height=s.y-a.y,h.push(n),n=new t.UVData,n.offX=r.x,n.offY=r.y+s.y,n.width=a.x,n.height=r.h-s.y,h.push(n),n=new t.UVData,n.offX=r.x+a.x,n.offY=r.y+s.y,n.width=s.x-a.x,n.height=r.h-s.y,h.push(n),n=new t.UVData,n.offX=r.x+s.x,n.offY=r.y+s.y,n.width=r.w-s.x,n.height=r.h-s.y,h.push(n),p.setupResource(f,u,h);break;case"D5Button":a=r.cut[1],0==a.x?(n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+r.w/4,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+r.w/2,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+r.w-r.w/4,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),p.buttonType=4):(n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=r.w/2,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+r.w/2,n.offY=r.y,n.width=r.w/2,n.height=r.h,h.push(n),p.buttonType=2),p.setupResource(f,u,h);break;case"D5Button4":n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+r.w/4,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+r.w/2,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+r.w-r.w/4,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),p.buttonType=4,p.setupResource(f,u,h);break;case"D5MirrorLoop":a=r.cut[0],0==a.y?(n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=a.x,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+a.x,n.offY=r.y,n.width=r.w-a.x,n.height=r.h,h.push(n),e._typeLoop=0):(n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=r.w,n.height=a.y,h.push(n),n=new t.UVData,n.offX=r.x,n.offY=r.y+a.y,n.width=r.w,n.height=r.h-a.y,h.push(n),e._typeLoop=1),p.setupResource(f,u,h);break;case"D5Bitmap":n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=r.w,n.height=r.h,h.push(n),p.setupResource(f,u,h);break;case"D5RadioBtn":n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+r.w/4,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+r.w/2,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+r.w-r.w/4,n.offY=r.y,n.width=r.w/4,n.height=r.h,h.push(n),p.setupResource(f,u,h);break;case"D5SliderButton":a=r.cut[0],n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=a.x,n.height=r.h/2,h.push(n),n=new t.UVData,n.offX=r.x+a.x,n.offY=r.y,n.width=r.w-a.x,n.height=r.h/2,h.push(n),n=new t.UVData,n.offX=r.x,n.offY=r.y+r.h/2,n.width=r.w/4,n.height=r.h/2,h.push(n),n=new t.UVData,n.offX=r.x+r.w/4,n.offY=r.y+r.h/2,n.width=r.w/4,n.height=r.h/2,h.push(n),n=new t.UVData,n.offX=r.x+r.w/2,n.offY=r.y+r.h/2,n.width=r.w/4,n.height=r.h/2,h.push(n),n=new t.UVData,n.offX=r.x+r.w-r.w/4,n.offY=r.y+r.h/2,n.width=r.w/4,n.height=r.h/2,h.push(n),p.setupResource(f,u,h);break;case"D5BitmapNumber":for(var l=0;10>l;l++)n=new t.UVData,n.offX=r.x+l*r.w/10,n.offY=r.y,n.width=r.w/10,n.height=r.h,h.push(n);p.setupResource(f,u,h);break;case"D5Loop":a=r.cut[0],s=r.cut[1],0==a.y?(n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=a.x,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+a.x,n.offY=r.y,n.width=s.x-a.x,n.height=r.h,h.push(n),n=new t.UVData,n.offX=r.x+s.x,n.offY=r.y,n.width=r.w-s.x,n.height=r.h,h.push(n)):(n=new t.UVData,n.offX=r.x,n.offY=r.y,n.width=r.w,n.height=a.y,h.push(n),n=new t.UVData,n.offX=r.x,n.offY=r.y+a.y,n.width=r.w,n.height=s.y-a.y,h.push(n),n=new t.UVData,n.offX=r.x,n.offY=r.y+s.y,n.width=r.w,n.height=r.h-s.y,h.push(n)),p.setupResource(f,u,h)}e._resourceLib[u]=p}},e.getData=function(t){return e._resourceLib[t]},e.prototype.setupResource=function(t,i,o){this._name=i;for(var r,n=0,a=o.length;a>n;n++)r=t.createTexture(i+n,o[n].offX,o[n].offY,o[n].width,o[n].height),e._resource[i+n]=r},e.prototype.getResource=function(t){return e._resource[this._name+t]},e.addResource=function(t,i,o){void 0===o&&(o=""),e._resource[o+t]=i},e._resource={},e._resourceLib={},e._typeLoop=0,e}();t.D5UIResourceData=e,__reflect(e.prototype,"d5power.D5UIResourceData")}(d5power||(d5power={}));var d5power;!function(t){var e=function(){function t(){}return t}();t.D5LoadData=e,__reflect(e.prototype,"d5power.D5LoadData")}(d5power||(d5power={}));var d5power;!function(t){var e=function(){function e(i){void 0===i&&(i=""),e._me=this,null==e._waitList&&(e._pool={},e._waitList=new Array,e._loader=new t.URLLoader,e._loader.onLoadComplete=e.onComplate,e._loader.onLoadError=e.onError,e._loader.onLoadProgress=e.onProgress)}return Object.defineProperty(e,"me",{get:function(){return e._me||new e,e._me},enumerable:!0,configurable:!0}),e.onComplate=function(t){var i=e._waitList;if(0==i.length)return void trace("[StepLoader] All data load complated.");var o=i.pop(),r=t.data;if(o.inpool&&null!=r&&(e._pool[o.url]=r),trace("[stepLoader]","开始处理"+o.url),null!=o.callback)try{o.callback.apply(o.thisobj,[r])}catch(n){trace("资源加载回叫失败",n)}for(var a,s=i.length-1;s>=0;s--)if(a=i[s],a.url==o.url){if(null!=a.callback)try{a.callback.apply(a.thisobj,[r])}catch(n){trace("资源加载回叫失败",n.getStackTrace())}i.splice(s)}e._isLoading="",e.loadNext()},e.onError=function(t){for(var i,o=e._waitList,r=o.pop(),n=o.length-1;n>=0;n--)i=o[n],i.url==r.url&&o.splice(1);e._isLoading="",e.loadNext()},e.onProgress=function(){},e.loadNext=function(){if(""==e._isLoading)if(e._isLoading="",e._waitList.length){var t=e._waitList[e._waitList.length-1];e._loader.dataformat=null,e._loader.load(t.url),e._isLoading=t.url}else e._me.complate()},Object.defineProperty(e,"isLoading",{get:function(){return""==e._isLoading?!0:!1},enumerable:!0,configurable:!0}),e.prototype.getResByUrl=function(t){return e._pool[t]},e.prototype.setAllComplate=function(t,e){void 0===e&&(e=null),this._allComplate=t,this._allComplateObj=e},e.prototype.complate=function(){if(null!=this._allComplate){try{this._allComplate.apply(this._allComplateObj)}catch(t){}this._allComplate=null}},e.prototype.addLoad=function(i,o,r,n){if(void 0===n&&(n=!0),"http"==i.substr(0,4)&&(i=i.replace(/\\/g,"/")),i&&""!=i){if(null!=e._pool[i])return void e.loadNext();var a=e._waitList[i];a=new t.D5LoadData,a.callback=o,a.inpool=n,a.url=i,a.thisobj=r,e._waitList.push(a),e.loadNext()}},e.prototype.deleteRes=function(t){e._pool[t];delete e._pool[t]},e._isLoading="",e}();t.StepLoader=e,__reflect(e.prototype,"d5power.StepLoader")}(d5power||(d5power={}));var d5power;!function(d5power){var URLLoader=function(){function URLLoader(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._url="",this._data=null,this._dataformat=null,this.onLoadComplete=null,this.onLoadError=null,this.onLoadProgress=null,t&&(e&&(this.dataformat=e),this.load(t))}return URLLoader.prototype.load=function(t){var e=this;if(this._data=null,this._url=t,null==this._dataformat&&(this._dataformat=URLLoader.DATAFORMAT_TEXT,this._url.length>=4))switch(this._url.substr(this._url.length-4,4).toLowerCase()){case".bmp":this._dataformat=URLLoader.DATAFORMAT_BITMAP;break;case".png":this._dataformat=URLLoader.DATAFORMAT_BITMAP;break;case".jpg":this._dataformat=URLLoader.DATAFORMAT_BITMAP;break;case"glsl":case".php":this._dataformat=URLLoader.DATAFORMAT_TEXT;break;case"json":this._dataformat=URLLoader.DATAFORMAT_JSON;break;default:this._dataformat=URLLoader.DATAFORMAT_BINARY}return null==this._xhr&&(this._xhr=this.getXHR()),null==this._xhr?void alert("Your browser does not support XMLHTTP."):(this._xhr.readyState>0&&this._xhr.abort(),this._xhr.open("GET",this._url,!0),this._xhr.addEventListener("progress",function(t){return e.onProgress(t)},!1),this._xhr.addEventListener("readystatechange",function(t){return e.onReadyStateChange(t)},!1),this._xhr.addEventListener("error",function(t){return e.onError(t)},!1),this.dataformat==URLLoader.DATAFORMAT_BITMAP?this._xhr.responseType="blob":this.dataformat!=URLLoader.DATAFORMAT_TEXT&&this.dataformat!=URLLoader.DATAFORMAT_JSON?this._xhr.responseType="arraybuffer":this._xhr.responseType="",void this._xhr.send())},Object.defineProperty(URLLoader.prototype,"dataformat",{get:function(){return this._dataformat},set:function(t){this._dataformat=t},enumerable:!0,configurable:!0}),Object.defineProperty(URLLoader.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(URLLoader.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),URLLoader.prototype.onReadyStateChange=function(t){4==this._xhr.readyState&&(this._xhr.status>=400||0==this._xhr.status?console.log(this._url,"load fail"):this.loadComplete())},URLLoader.prototype.loadComplete=function(){var _this=this;switch(this.dataformat){case URLLoader.DATAFORMAT_BINARY:this._data=new d5power.ByteArray(this._xhr.response);break;case URLLoader.DATAFORMAT_SOUND:this._data=this._xhr.responseBody;break;case URLLoader.DATAFORMAT_TEXT:this._data=this._xhr.responseText;break;case URLLoader.DATAFORMAT_JSON:var json;try{json=eval("("+this._xhr.responseText+")")}catch(e){json=null}this._data=json;break;case URLLoader.DATAFORMAT_BITMAP:var img=new Image;void 0!=window.createObjectURL?img.src=window.createObjectURL(this._xhr.response):void 0!=window.URL?img.src=window.URL.createObjectURL(this._xhr.response):void 0!=window.webkitURL&&(img.src=window.webkitURL.createObjectURL(this._xhr.response));var that=this;return void(img.onload=function(){that.onLoadComplete&&(_this._data=img,that.onLoadComplete(that))});default:this._data=this._xhr.responseText}this.onLoadComplete&&this.onLoadComplete(this)},URLLoader.prototype.onProgress=function(t){},URLLoader.prototype.onError=function(t){this.onLoadError&&this.onLoadError(this),console.log("loaderror, url: ",this._url),console.log("load error",t)},URLLoader.prototype.getXHR=function(){var t=null;return t=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},URLLoader.DATAFORMAT_BINARY="binary",URLLoader.DATAFORMAT_TEXT="text",URLLoader.DATAFORMAT_SOUND="sound",URLLoader.DATAFORMAT_BITMAP="bitmap",URLLoader.DATAFORMAT_JSON="json",URLLoader}();d5power.URLLoader=URLLoader,__reflect(URLLoader.prototype,"d5power.URLLoader")}(d5power||(d5power={}));